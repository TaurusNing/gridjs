<body>
<canvas id="test"></canvas>
<script src="../gridjs.js"></script>
<script>
var g = gridjs,
    canvas = document.getElementById('test');

g.open('nyt.jpg', function(im) {
  im.resize(150, 100).grayscale();
  console.log(harris(im.pixel.G));
});

function harris(srcArray) {
  var x, y, imx, imy, wxx, wyy, wxy, wdet, wtr, H,
      g = gridjs,
      width = srcArray[0].length,
      height = srcArray.length;

      imx = g.gauss(srcArray, 5, 1, 0);
      imy = g.gauss(srcArray, 5, 1, 1);

      wxx = g.gauss(g.square(imx), 5);
      wyy = g.gauss(g.square(imy), 5);
      wxy = g.gauss(g.mul(imx, imy), 5);

      wdet = g.minus(g.mul(wxx, wyy), g.square(wxy));
      wtr = g.add(wxx, wyy);

      H = g.div(wdet, wtr, 0);

      g.norm(H);

      return H;
}
</script>
</body>